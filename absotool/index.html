<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>AbsoTool brief intro</title>
</head>
<style type="text/css">

	.guide {
		position: relative;
		width: 600px;
		margin-left: 50px;
		height: 677px;
		overflow: auto;
		background-color: beige;
		padding: 10px;
	}
	#bg {
		position: relative;
		/*margin: 0 auto;*/
		width: 400px;
		height: 400px;
		border: 1px solid;
	}
	li {
		margin-top: 5px;
	}



	.cls {
		position: absolute;
		top: 20px;
		width: 50px;
		height: 50px;
		color: white;
	}

	.cls-1 {
		margin: 20px;
		left: 20px;
		background-color: red;
	}

	.cls-1.btn-2{

	}

	.cls-2 {
		left: 120px;
		background-color: blue;
		display: none;
	}

	.cls-3 {
		left: 220px;
		/*background-color: green;*/
	}

	.cls-4 {
		width: 40px;
		height: 40px;
		left: 320px;
		background-color: purple;
	}
	.aim_area {
		position: absolute;
		top: 200px;
		left: 0;
		width: 400px;
		height: 100px;
		display: flex;
		/*justify-content: space-around;*/
		text-align: center;
		z-index: -1;
	}
	.aim_box {
		width: 60px;
		height: 60px;
		border: 2px solid;
		margin-left: 20px;
	}
	.tips{
		color: #c800ff;
	}
	textarea{
		width: 400px;
		height: 200px;
	}
	.highline{
		background-color: #aae81f;
	}
</style>
<body>
<div style="display: flex; justify-content: center; flex-wrap: wrap;">
	<div>
		<div id="bg">
			<div class="cls cls-1">btn1</div>

			<div class="cls cls-2">灯泡</div>

			<div class="cls cls-3">input框</div>

			<div class="cls cls-4">btn2</div>

			<div class="aim_area">
				<div class="aim_box red_box">红</div>
				<div class="aim_box blue_box">蓝</div>
				<div class="aim_box green_box">绿</div>
				<div class="aim_box purple_box">紫</div>
			</div>
		</div>

		<div class="text-box" style="margin-top: 50px">
			<p>css文件</p>
			<textarea name="" id="" cols="30" rows="10"></textarea>
		</div>
	</div>
	<div class="guide">
		<div>
			<h1>指北</h1>
			<ul>
				<li>引入js的demo

					<pre>
// 动态加载
aLoader = function(callback){
  var path = "js/";
  var file = "absotool.js";

  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = path + file;
  document.getElementsByTagName("head")[0].appendChild(script);
  script.onload = function(){
    if(typeof(callback) == "function") callback();
  }
}

// 这样写的目的
// 方便在控制台call
// 在测试场绕开config
// 这只是个例子，selector和options可以放在容易修改的地方
aInit = function(){
  aLoader(function(){
    var selector = [
      ".cls",
      // ".cls-1",
      // ".cls-2",
      // ".cls-3",
      // "cls-4",
    ];
    var options = {};
    aTool = new AbsoTool(selector, options);
    aTool.initListen();
  })
}

var aTool;	// 一定要留个可以在控制台访问的变量
aInit();

					</pre>
				</li>
				<li>你可以按照下面的步骤来熟悉这个工具，<b>慢慢来不要急</b></li>
				<li>先按F12并切换到Console</li>
				<li>然后按[Z + 1]，如果看到有打印出"absotool init"，即可拖动</li>
				<li>目标1：把红色、紫色矩形分别<span class="highline">拖</span>到对应的方框里。	提示：<span class="tips">鼠标拖动</span></li>
				<li>目标2：改变矩形<span class="highline">大小</span>，填满方框。	提示：<span class="tips">按[Z + 2]，然后按[WASD]可微调大小</span></li>
				<li>目标3：<span class="highline">对齐</span>边框。	提示：<span class="tips">按[Z + 3]，然后按[WASD]可微调位置，按[Z + T]可开/关提示</span></li>
				<li>目标4：<span class="highline">显示</span>灯泡。	提示：<span class="tips">按[X + 1]</span></li>
				<li>目标5：<span class="highline">隐藏</span>灯泡。		提示：<span class="tips">按[X + 2]</span></li>
				<li>目标6：为无底色的"input框"<span class="highline">加底色</span>。 提示：<span class="tips">按[X + 3]</span></li>
				<li>目标7：<span class="highline">去</span>除已加的<span class="highline">底色</span>。 提示：<span class="tips">按[X + 4]</span></li>
				<li><b>目标8</b>：把矩形的样式<span class="highline">"写"在"css文件"</span>里。提示：<span class="tips">按[C + 1]，然后粘贴在文本框内</span></li>
				<h3>很好你做到了，但是要改需求<button id="change1" type="button" onclick="change1()">自觉点一下</button></h3>
				<li>目标9：把矩形<span class="highline">全部一起</span>移到新位置。	提示：<span class="tips">点击任意矩形，按一次[Z + Q]切换步长，再按一次[SHIFT + S]</span></li>
				<h3>可以可以，但是还是要改需求<button id="change2" type="button" onclick="change2()">自觉点一下</button></h3>
				<li>目标10：把红色、紫色矩形，<span class="highline">这两个移</span>到新位置。	提示：<span class="tips">按[CTRL + 左键]选中两个矩形，按一次[Z + Q]切换步长，然后[W]</span></li>
			</ul>
		</div>

		<div>
			<h1 style="color:red;">限制</h1>
			<ul>
				<li>请确保实例化前selector是绝对定位，还有记得引入jQuery</li>
				<!-- <li>不要有其他div包着selector，selector的parent是#bg</li> -->
			</ul>
		</div>
		
		<div>
			<h1>修复、完善</h1>
			<ul>
				<li>20190929 修复parent的offset不为0或margin不为0，导致调位置出现偏差</li>
				<li>20190930 C功能会把数据复制到clipboard</li>
				<li>20190930 新增[C + 1]：获得样式。可直接CTRL + V到css文件</li>
				<li>20191025 <ul>
						<li>修复parent为相对定位且带有margin时导致拖动位置不准</li>
						<li>修复辅助对位的两条竖线高度不足的情况</li>
						<li>新增[V + 1]方法，还原大小，位置 ，z-index</li>
					</ul>
				</li>
				<li>20191026
					<ul>
						<li>更新 两条辅助横线的长度 = parent.width()</li>
						<li>用辅助线的范围代替检查边界的功能</li>
						<li>修复 currentTarget打印的位置信息不准</li>
						<li>修复 parent有boder对target位置的影响</li>
					</ul>
				</li>
				<li>20191203
					<ul>
						<li>兼容touch事件</li>
						<li>新增一个面板[Z + E]</li>
						<li>修复setCss[V + 1]，改用内联而不是插入css规则</li>
						<li>修复getCss[C + 1]，元素带有margin导致位置不准确</li>
					</ul>
				</li>

			</ul>
		</div>

	</div>

</div>

</body>
<!-- jquery -->
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="js/absotool.js"></script>
<script type="text/javascript">

aLoader = function(callback){
  var path = "js/";
  var file = "absotool.js";

  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = path + file;
  document.getElementsByTagName("head")[0].appendChild(script);
  script.onload = function(){
    if(typeof(callback) == "function") callback();
  }
}

// 这样写的目的
// 方便在控制台call
// 在测试场绕开config
aInit = function(){
  aLoader(function(){
    var selector = [
      ".cls",
      // ".cls-1",
      // ".cls-2",
      // ".cls-3",
      // "cls-4",
    ];
    var options = {
      bgColors:["green"],
    };
    aTool = new AbsoTool(selector, options);
    aTool.initListen();
  })
}

var aTool;	// 一定要留个可以在控制台访问的变量
aInit();

var has_changed1 = false;
function change1(){
	if(has_changed1){
		$("#change1").text("好了别点了");
		return false;
	}
	$(".aim_area").css("top", 300);
	$("#change1").text("ok");
	has_changed1 = true;
}	

var has_changed2 = false;
function change2(){
	if(!has_changed1){
		$("#change2").text("先点上一个↑");
		return false;
	}
	if(has_changed2){
		$("#change2").text("好了别点了");
		return false;
	}
	$("#change2").text("ok");
	$(".red_box").css({
		position: "relative",
		top: "-5px",
	});
	$(".purple_box").css({
		position: "relative",
		top: "-5px",
	});
	has_changed2 = true;
}	
</script>
</html>
